<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Tile Game</title>
	<!-- Include Bootstrap CSS -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
	<style>
		body {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			margin: 0;
		}
		.grid {
			display: grid;
			grid-template-columns: repeat(8, 100px);
			grid-template-rows: repeat(8, 100px);
			gap: 5px;
		}
		.tile {
			width: 100px;
			height: 100px;
			background-color: lightblue; /* Non-path tiles */
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 40px;
			cursor: pointer;
			position: relative;
		}
		.tracker {
			background-color: red !important;
		}
		.controls {
			display: flex;
			flex-direction: column;
			margin-right: 20px;
		}
		#tracker-info, #distance-info, #error-message {
			font-size: 18px;
			margin-top: 10px;
		}
		#error-message {
			color: red;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-3 controls">
				<button id="move-1-btn" class="btn btn-primary mb-2" onclick="moveTiles(1)">Jump 1 Tile</button>
				<button id="move-2-btn" class="btn btn-primary mb-2" onclick="moveTiles(2)">Jump 2 Tiles</button>
				<button id="move-3-btn" class="btn btn-primary mb-2" onclick="moveTiles(3)">Jump 3 Tiles</button>
				<button id="move-4-btn" class="btn btn-primary mb-2" onclick="moveTiles(4)">Jump 4 Tiles</button>
				<button id="move-5-btn" class="btn btn-primary mb-2" onclick="moveTiles(5)">Jump 5 Tiles</button>
				<button id="move-6-btn" class="btn btn-primary mb-2" onclick="moveTiles(6)">Jump 6 Tiles</button>
				<button id="roll-dice-btn" class="btn btn-secondary mb-2" onclick="rollDice()">Roll a Random Dice</button>
				<button id="jump-dice-btn" class="btn btn-success mb-2" onclick="jumpDiceResult()">Jump Dice Result</button>
				<div id="dice-result" class="mt-2">Dice Result: N/A</div>
				<div id="tracker-info">Current Position: (x: 0, y: 1)</div>
				<div id="distance-info">Distance from Start: 0</div>
				<div id="error-message"></div>
			</div>
			<div class="col-md-9">
				<div class="grid" id="grid">
					<!-- The grid will be generated by JavaScript -->
				</div>
			</div>
		</div>
	</div>

	<script>
		const gridSize = 8;
		const path = [
			{ "x": 0, "y": 1, "type": "flag", "xp": 0, "rarity": "grey" },
			{ "x": 1, "y": 1, "type": "coin", "xp": 0, "rarity": "grey" }, 
			{ "x": 2, "y": 1, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 2, "y": 0, "type": "diamond", "xp": 0, "rarity": "grey" }, 
			{ "x": 3, "y": 0, "type": "box", "xp": 0, "rarity": "grey" },
			{ "x": 4, "y": 0, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 5, "y": 0, "type": "box", "xp": 0, "rarity": "grey" }, 
			{ "x": 5, "y": 1, "type": "question-mark" }, 
			{ "x": 6, "y": 1, "type": "coin", "xp": 0, "rarity": "grey" }, 
			{ "x": 6, "y": 2, "type": "diamond", "xp": 0, "rarity": "grey" }, 
			{ "x": 6, "y": 3, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 7, "y": 3, "type": "box", "xp": 0, "rarity": "grey" }, 
			{ "x": 7, "y": 4, "type": "blue-box", "xp": 0, "rarity": "grey" }, 
			{ "x": 7, "y": 5, "type": "question-mark" }, 
			{ "x": 6, "y": 5, "type": "coin", "xp": 0, "rarity": "grey" }, 
			{ "x": 6, "y": 6, "type": "diamond", "xp": 0, "rarity": "grey" }, 
			{ "x": 5, "y": 6, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 4, "y": 6, "type": "box", "xp": 0, "rarity": "grey" }, 
			{ "x": 3, "y": 6, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 2, "y": 6, "type": "question-mark" }, 
			{ "x": 2, "y": 5, "type": "coin", "xp": 0, "rarity": "grey" }, 
			{ "x": 1, "y": 5, "type": "diamond", "xp": 0, "rarity": "grey" }, 
			{ "x": 1, "y": 4, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 1, "y": 3, "type": "box", "xp": 0, "rarity": "grey" }, 
			{ "x": 0, "y": 3, "type": "face", "xp": 0, "rarity": "grey" }, 
			{ "x": 0, "y": 2, "type": "box", "xp": 0, "rarity": "grey" }
		];

		let currentStep = 0;
		let trackerPosition = path[currentStep];
		let diceResult = null;
		const startPosition = { ...trackerPosition };

		const emojiMap = {
			'flag': 'üö©',
			'coin': 'ü™ô',
			'face': 'üòä',
			'diamond': 'üíé',
			'box': 'üì¶',
			'question-mark': '‚ùì',
			'blue-box': 'üü¶'
		};

		const rarityColors = {
			'grey': 'lightgrey',
			'green': 'green',
			'blue': 'blue',
			'purple': 'purple',
			'orange': 'orange'
		};

		const rarityThresholds = {
			'grey': 1,
			'green': 3,
			'blue': 7,
			'purple': 13,
			'orange': Infinity // Maxed out
		};

		function createGrid() {
			const grid = document.getElementById('grid');
			grid.innerHTML = '';
			for (let y = 0; y < gridSize; y++) {
				for (let x = 0; x < gridSize; x++) {
					const tile = document.createElement('div');
					tile.classList.add('tile');
					const tileData = path.find(p => p.x === x && p.y === y);
					if (tileData) {
						tile.textContent = emojiMap[tileData.type];
						if (tileData.xp !== undefined) {
							tile.dataset.xp = tileData.xp;
							tile.dataset.rarity = tileData.rarity;
							tile.style.backgroundColor = rarityColors[tileData.rarity];
							tile.title = `XP: ${tileData.xp}/${rarityThresholds[tileData.rarity]} (Rarity: ${tileData.rarity})`;
						}
						if (x === trackerPosition.x && y === trackerPosition.y) {
							tile.classList.add('tracker');
						}
					}
					grid.appendChild(tile);
				}
			}
		}

		function moveTiles(steps) {
			currentStep = (currentStep + steps) % path.length;
			trackerPosition = path[currentStep];
			updateTrackerInfo();
			updateTileXp(trackerPosition);
			createGrid();
		}

		function rollDice() {
			diceResult = Math.floor(Math.random() * 6) + 1;
			document.getElementById('dice-result').textContent = `Dice Result: ${diceResult}`;
			document.getElementById('error-message').textContent = ''; // Clear any previous error
		}

		function jumpDiceResult() {
			if (diceResult === null) {
				document.getElementById('error-message').textContent = 'Error: Roll the dice first!';
			} else {
				moveTiles(diceResult);
				diceResult = null; // Reset dice result after the move
				document.getElementById('dice-result').textContent = 'Dice Result: N/A';
			}
		}

		function updateTileXp(position) {
			const tileData = path.find(p => p.x === position.x && p.y === position.y);
			if (tileData && tileData.xp !== undefined) {
				tileData.xp += 1;
				const currentRarity = tileData.rarity;
				if (tileData.xp >= rarityThresholds[currentRarity]) {
					upgradeTileRarity(tileData);
				}
			}
		}

		function upgradeTileRarity(tileData) {
			const rarities = ['grey', 'green', 'blue', 'purple', 'orange'];
			const currentRarityIndex = rarities.indexOf(tileData.rarity);
			if (currentRarityIndex < rarities.length - 1) {
				tileData.rarity = rarities[currentRarityIndex + 1];
				tileData.xp = 0;
			}
		}

		function updateTrackerInfo() {
			const trackerInfo = document.getElementById('tracker-info');
			trackerInfo.textContent = `Current Position: (x: ${trackerPosition.x}, y: ${trackerPosition.y})`;

			const distance = calculateDistance(startPosition, trackerPosition);
			const distanceInfo = document.getElementById('distance-info');
			distanceInfo.textContent = `Distance from Start: ${distance}`;
		}

		function calculateDistance(start, current) {
			return Math.abs(start.x - current.x) + Math.abs(start.y - current.y);
		}

		createGrid();
		updateTrackerInfo();
	</script>
</body>
</html>

